# 범용 앱 업데이트 가이드 및 개발 교훈 (Developer Learnings)

본 문서는 K-Destiny 프로젝트 수행 중 발생한 시스템 업데이트 지연 및 연결 문제를 해결하며 얻은 기술적 경험을 바탕으로, 향후 다른 프로젝트 개발 시 참고할 수 있는 주의 사항과 가이드를 정리한 자산입니다.

---

## 🚀 1. 프로세스 및 포트 관리 (Process & Port Hygiene)
**교훈**: 유령(좀비) 프로세스가 이전 버전의 코드를 물고 살아남아 업데이트를 방해하는 경우가 많습니다.

- **체크리스트**:
    - [ ] 새로운 배포 전 `taskkill`을 통해 이전 실행 프로세스(`node.exe`, `python.exe`)를 완전히 종료했는가?
    - [ ] `netstat -ano | findstr :포트번호`를 통해 실시간으로 포트 점유가 해제되었는지 확인했는가?
    - [ ] 가디언(Guardian) 스크립트 사용 시, 자동 재시작이 오히려 종료를 방해하지 않는지 검토했는가?

## 📂 2. 강력한 캐시 무효화 (Strict Cache Invalidation)
**교훈**: 파일 시스템의 변경만으로는 Vite나 브라우저의 캐시를 이기지 못할 때가 있습니다.

- **체크리스트**:
    - [ ] **Vite 내부 캐시**: `node_modules/.vite` 폴더를 주기적으로(또는 오류 시) 강제 삭제하여 사전 번들링된 캐시를 갱신하는가?
    - [ ] **Polling 워치 모드**: 특히 Windows 환경에서 파일 감지 누락을 방지하기 위해 `vite.config.ts`에서 `usePolling: true` 옵션을 사용했는가?
    - [ ] **DOM 구조 변경**: 단순 속성(ReadOnly 등) 변경보다는 태그 구조 자체를 변경(Input -> Div)하는 것이 브라우저 캐시 무시 및 사용자 인지에 더 효과적입니다.

## 🛠️ 3. 배포 파이프라인의 원자성 (Atomic Deployment)
**교훈**: 하나씩 손으로 서버를 끄고 켜는 과정에서 실수가 발생합니다.

- **제시하는 표준 재배포 절차**:
    1. **Kill All**: 개발 중인 언어 런타임을 모두 종료합니다.
    2. **Clean Cache**: 빌드 산출물과 개발 서버의 임시 캐시를 제거합니다.
    3. **Port Validation**: 포트가 깨끗하게 비워졌는지 확인합니다.
    4. **Start Service**: 깨끗한 상태에서 서비스를 새롭게 올립니다.

## 📱 4. 환경별 접속 정합성 확인
**교훈**: Docker 포트(80)와 로컬 개발 포트(5173)가 혼용될 경우, 최신 코드 반영 여부가 불투명해집니다.

- **체크리스트**:
    - [ ] 현재 수정 중인 소스가 반영되는 **정확한 타겟 포트**를 사용자에게 명시했는가?
    - [ ] Docker 이미지 빌드 시점이 코드 수정 시점과 일치하도록 자동화되어 있는가?

---

> [!TIP]
> **개발 시 마인드셋**: "동일한 코드가 계속 보인다면, 내 코드가 틀린 게 아니라 브라우저와 서버가 **과거의 유령**을 보여주고 있을 가능성을 먼저 의심하십시오."
