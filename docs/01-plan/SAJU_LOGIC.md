# ☯️ K-Destiny: 사주-MBTI 매핑 및 오행 알고리즘 설계

> **담당:** bkit 백엔드 전문가 (bkend-expert)
> **목적:** 생년월일시 데이터를 기반으로 오행(Five Elements) 에너지를 추출하고, 이를 16가지 MBTI 유형과 매핑하는 로직 정의.

---

## 1. 오행(Five Elements) 에너지 정의

| 오행 (Energy) | 성격적 특성 (K-Energy Profile) | 매핑되는 MBTI 경향성 |
| :--- | :--- | :--- |
| **나무 (Wood - 목)** | 성장, 창의성, 이상주의, 추진력 | **N (직관), F (감정)** - ENFP, INFJ, ENFJ |
| **불 (Fire - 화)** | 열정, 사교성, 화려함, 표현력 | **E (외향), S/N (감각/직관)** - ENTP, ESFP, ESFJ |
| **흙 (Earth - 토)** | 안정, 신뢰, 현실주의, 포용력 | **S (감각), J (판단)** - ISTJ, ISFJ, ESTJ |
| **금 (Metal - 금)** | 논리, 정의감, 결단력, 원칙주의 | **T (사고), J (판단)** - INTJ, ENTJ, ISTP |
| **물 (Water - 수)** | 지혜, 유연함, 통찰력, 깊이 | **I (내향), T/F (사고/감정)** - INTP, ISFP, INFP |

---

## 2. 사주 분석 프로세스 (Saju Logic Flow)

1.  **입력 단계:** 사용자의 생년월일시(양력/음력) 및 성별 입력.
2.  **만세력 변환:** 
    - 내부 알고리즘 또는 외부 API를 통해 사주 팔자(연, 월, 일, 시) 도출.
    - **일주(Day Pillar)**의 천간(일간)을 사용자의 핵심 '에너지 유형'으로 설정.
3.  **오행 점수화:** 8글자(팔자)에 포함된 오행의 개수 및 강약을 수치화. (예: 화 3개, 수 1개 -> 화(Fire) 성향 강함)
4.  **MBTI 매칭:** 가장 강한 오행 에너지와 사용자의 MBTI를 비교하여 '운명적 일치도' 계산.

---

## 3. 아이돌 데이터 자동 수집 (AI-Driven Retrieval)

- **AI 검색 모드:** 사용자가 아이돌 이름을 입력하면 구글 AI 검색(Gemini/SGE 등)을 시뮬레이션하여 다음 데이터를 자동 수집합니다.
    - **필수 데이터:** 생년월일, 성별, MBTI (T/A 유형 포함).
    - **추가 데이터:** 탄생 시간 (공개된 경우), 대표 이미지 URL.
- **다국어 지원:** 한국어, 영어, 현지어(스페인어, 포르투갈어 등)로 검색하여 가장 정확한 데이터를 추출.
- **데이터 검증:** 복수의 소스(위키백과, 나무위키, Kpop 팬덤 사이트)를 비교하여 신뢰도 확보.

---

## 4. 글로벌 대응 (QA/CTO 피드백 반영)

- **시간 모름 모드:** 태어난 시(Hour)를 모를 경우, '일주(Day Pillar)' 정보만으로 분석을 수행하는 알고리즘 적용.
- **용어 현지화:** '갑목(Gap-Mok)' 대신 **"Strong Oak Energy"**, '병화(Byung-Hwa)' 대신 **"Bright Sun Energy"** 등 직관적인 영어 명칭 사용.

---
*본 설계는 bkit 에이전트 군단의 검토를 거쳐 작성되었습니다.*
